$(function () {
    function e() {
        ($(window).width() < 768 && 0 < $(window).scrollTop()) || (768 < $(window).width() && 0 < $(window).scrollTop()) ? $(".header").addClass("sticky") : $(".header").removeClass("sticky");
    }
    $("#pick_up_transfer-radio_field input").change(function () {
        0 == $(this).val() ? $("#pick_up_transfer_field input").val("Yes") : $("#pick_up_transfer_field input").val("No");
    }),
        $(".validate-required input").each(function () {
            $(this).attr("required", "true");
        }),
        $(".wp-block-image, .gallery-item").click(function () {
            var e = $(this).find("img").attr("src");
            return $(".gallery_popup .gallery_popup-image img").attr("src", e), $("body").addClass("popup_opened"), $(".gallery_popup").fadeIn(), !1;
        }),
        $(".gallery_popup .close").click(function () {
            $("body").removeClass("popup_opened"), $(".gallery_popup .gallery_popup-image img").attr("src", ""), $(".gallery_popup").fadeOut(0);
        }),
        0 < $(".flexslider").length && $(".flexslider").flexslider({ animation: "slide", controlNav: "thumbnails" }),
        0 < $(".product-number").length && $(".cart_link a").append($(".product-number")),
        $(".target_blank-links a").each(function () {
            $(this).attr("target", "_blank");
        }),
        $(window).scroll(function () {
            e();
        }),
        e(),
        setInterval(function () {
            $(".product-calendar-inner .simcal-event").each(function () {
                var a = $(this).children(".simcal-event-title");
                $(".product-calendar-boats a").each(function () {
                    var e = $(this).attr("href");
                    $(this).text().toLowerCase() == a.text().toLowerCase() && a.wrap('<a href="' + e + '"><a/>');
                }),
                    "free" == $(this).find(".simcal-event-description").children("p").text().toLowerCase() && $(this).find(".simcal-event-title").addClass("free");
            });
        }, 1e3),
        $(".product-calendar-tab").click(function () {
            var e = "#" + $(this).data("calednar");
            $(".product-calendar-tab").removeClass("active"),
                $(this).addClass("active"),
                $(".product-calendar-inner").removeClass("active"),
                $(e).addClass("active"),
                $(".product-calendar-inner.active .simcal-event").click(),
                $(".product-calendar-inner.active .simcal-event").each(function () {
                    var e = "#" + $(this).attr("aria-describedby");
                    "Free" == $(e).find(".simcal-event-description").text() && $(this).addClass("free");
                });
        }),
        jQuery("body").on("click", ".toggle_menu, .toggled_menu-bg", function () {
            $(".mobile_menu").hasClass("active")
                ? ($(".toggled_menu-bg").remove(), $(".mobile_menu").removeClass("active"), $(".toggle_menu").removeClass("toggled"))
                : ($("body").append('<div class="toggled_menu-bg"></div>'), $(".mobile_menu").addClass("active"), $(".toggle_menu").addClass("toggled"));
        }),
        $("#amount_people") && (o = $("#amount_people option").length),
        $(".checkout-form").submit(function () {
            var t = {};
            jQuery(".checkout-form input, .checkout-form select, .checkout-form textarea").each(function () {
                var e = jQuery(this).attr("name"),
                    a = jQuery(this).val();
                t[e] = a;
            }),
                sessionStorage.setItem("user_data", JSON.stringify(t)),
                console.log(JSON.parse(sessionStorage.getItem("user_data")));
        }),
        console.log(JSON.parse(sessionStorage.getItem("user_data"))),
        sessionStorage.getItem("user_data") &&
            ((r = JSON.parse(sessionStorage.getItem("user_data")).billing_first_name),
            (a = JSON.parse(sessionStorage.getItem("user_data")).billing_email),
            (t = JSON.parse(sessionStorage.getItem("user_data")).amount_people),
            (i = JSON.parse(sessionStorage.getItem("user_data")).booking_date),
            (s = JSON.parse(sessionStorage.getItem("user_data")).message),
            (l = JSON.parse(sessionStorage.getItem("user_data")).pick_up_transfer),
            (0 == $("form.checkout-form").length && 0 == $("form.checkout.woocommerce-checkout").length) ||
                ($("#billing_first_name").val(r), $("#billing_email").val(a), $("#amount_people").val(t), $("#booking_date").val(i), $("#message").val(s), $("#pick_up_transfer").val(l))),
        $("#size").change(function () {
            var e = $(this).val();
            $('button[name="add-to-cart"]').val(e), console.log(e);
        });
    var o,
        a,
        t,
        i,
        s,
        l,
        r = window.location.hostname,
        n = window.location.protocol + "//" + r;
    function c(e) {
        e.hasClass("active") ? e.hasClass("checkbox") && e.removeClass("active") : (e.hasClass("radio") && $(".choice_fields label.radio").removeClass("active"), e.addClass("active"));
    }
    $(".additional_field label").click(function () {
        var e = $(this).data("id"),
            a = $(".checkout-form").data("post-id"),
            t = $(".choice_fields .radio.active").data("id"),
            i = !1;
        $(this).hasClass("checked") ? $(this).removeClass("checked") : ((i = !0), $(this).addClass("checked")),
            $(".booking_form").addClass("loading"),
            $.ajax({
                url: n + "/wp-admin/admin-ajax.php",
                type: "POST",
                dataType: "html",
                data: { action: "update_time_selection_price_single", product_id: e, isChecked: i, post_id: a, product_boat_id: t },
                success: function (e) {
                    $(".booking_form").removeClass("loading"), $(".total span").html(e);
                },
            });
    }),
        $(".time_selection label").click(function () {
            var e = $(this).data("id"),
                a = $(".checkout-form").data("post-id"),
                t = [],
                i = !1;
            "Party Boat" == $(this).text() && (i = !0),
                $(this).hasClass("active") ||
                    ($(".booking_form").addClass("loading"),
                    $(".time_selection label").each(function () {
                        $(this).data("id") !== e && t.push($(this).data("id"));
                    }),
                    $.ajax({
                        url: n + "/wp-admin/admin-ajax.php",
                        type: "POST",
                        dataType: "html",
                        data: { action: "update_time_selection_price", product_id: e, remove_product_ids: t, isChecked: !0, post_id: a },
                        success: function (e) {
                            if (($(".total span").html(e), $(".booking_form").removeClass("loading"), $("#amount_people").html(""), i))
                                for (var a = 1; a <= 10; a++) $("#amount_people").append('<option value="' + a + '">' + a + "</option>");
                            else for (a = 1; a <= o; a++) $("#amount_people").append('<option value="' + a + '">' + a + "</option>");
                        },
                        error: function (e, a, t) {
                            console.error("Error filtering boats:", t);
                        },
                    }));
        }),
        $(".choice_fields label.checkbox input").click(function () {
            var e = $(this).parent();
            setInterval(c(e), 100);
        }),
        $(".choice_fields label.radio").click(function () {
            var e = $(this);
            $(".boat_name-field").val(e.text()), setInterval(c(e), 100);
        }),
        $('a[href="#more"]').click(function () {
            return $(this).closest(".short_description").nextAll().fadeIn(), !1;
        }),
        $(".filter_content .btn").click(function () {
            var e = $(this).data("order"),
                a = $(this).parent().data("cat");
            $(".boats_wrapper").addClass("loading"),
                $.ajax({
                    url: n + "/wp-admin/admin-ajax.php",
                    type: "POST",
                    dataType: "html",
                    data: { action: "filter_boats", order: e, category: a },
                    success: function (e) {
                        $(".boats_wrapper").removeClass("loading"), $(".boats_wrapper").html(e), console.log(e);
                    },
                    error: function (e, a, t) {
                        console.error("Error filtering boats:", t);
                    },
                });
        }),
        $(".stars a").click(function () {
            var e = $(this);
            setTimeout(
                function () {
                    this.prevAll().addClass("active"), this.nextAll().removeClass("active");
                }.bind(e),
                20
            );
        });
    {
        function d(e) {
            var a = 0;
            $(".boats_slider .boats_slider-item").each(function () {
                var e = $(this).height();
                a = a < e ? e : a;
            }),
                $(".boats .owl-carousel .boats_slider-item").css("height", a + "px");
        }
        0 < $(".boats_slider").length && $(".boats_slider").owlCarousel({ loop: !0, margin: 58, nav: !0, autoplay: !0, responsive: { 0: { items: 1 }, 768: { items: 2 }, 1200: { items: 3 } }, onInitialized: d });
    }
    $(window).resize(function () {
        0 < $(".boats_slider").length && d();
    }),
        0 < $(".related_slider").length && $(".related_slider").owlCarousel({ loop: !0, margin: 72, nav: !0, autoplay: !0, responsive: { 0: { items: 1 }, 768: { items: 2 }, 1200: { items: 2 } } }),
        0 < $(".gallery_slider").length && $(".gallery_slider").owlCarousel({ loop: !0, nav: !1, autoplay: !0, responsive: { 0: { items: 1, autoWidth: !1, margin: 45 }, 768: { items: 3, autoWidth: !0, margin: 30 }, 1200: { items: 5 } } }),
        $(".toggle_title").click(function () {
            $(this).parent().hasClass("toggled") ? $(this).parent().removeClass("toggled") : $(this).parent().addClass("toggled");
        });
});
